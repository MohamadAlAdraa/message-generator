<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quran Homework Generator</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 2rem;
      background-color: #f3f7fa;
      color: #333;
    }

    h1 {
      text-align: center;
      margin-bottom: 1.5rem;
    }

    .section {
      background-color: #fff;
      padding: 1rem;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      margin-bottom: 2rem;
    }

    .section label {
      display: block;
      margin-top: 0.5rem;
      font-weight: 600;
    }

    .section input,
    .section select {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.25rem;
      border-radius: 5px;
      border: 1px solid #ccc;
      font-size: 1rem;
    }

    .student-box {
      background-color: #ffffff;
      border-left: 5px solid #007bff;
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: 6px;
    }

    .add-btn, .generate-btn {
      display: inline-block;
      margin-top: 1rem;
      background-color: #007bff;
      color: white;
      padding: 0.6rem 1.2rem;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
    }

    .delete-btn {
      float: right;
      background: red;
      color: white;
      border: none;
      padding: 0.3rem 0.6rem;
      border-radius: 4px;
      cursor: pointer;
    }

    .output {
      white-space: pre-line;
      background-color: #eef;
      padding: 1rem;
      border-radius: 8px;
    }

    .inline {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 0.5rem;
    }
  </style>
</head>
<body>
  <h1>📚 Quran Homework Generator</h1>

  <div class="section">
    <label for="newStudent">Add New Student</label>
    <input type="text" id="newStudent" placeholder="e.g. Mohamad" />
    <button class="add-btn" onclick="addStudentToList()">Add Student</button>
  </div>

  <div class="section" id="studentsContainer"></div>

  <button class="generate-btn" onclick="generateMessage()">Generate Message</button>

  <div class="section output" id="output"></div>

  <script>
    const surahs = [
      "الفاتحة", "البقرة", "آل عمران", "النساء", "المائدة", "الأنعام", "الأعراف",
      "الأنفال", "التوبة", "يونس", "هود", "يوسف", "الرعد", "إبراهيم", "الحجر",
      "النحل", "الإسراء", "الكهف", "مريم", "طه", "الأنبياء", "الحج", "المؤمنون",
      "النور", "الفرقان", "الشعراء", "النمل", "القصص", "العنكبوت", "الروم", "لقمان",
      "السجدة", "الأحزاب", "سبأ", "فاطر", "يس", "الصافات", "ص", "الزمر", "غافر",
      "فصلت", "الشورى", "الزخرف", "الدخان", "الجاثية", "الأحقاف", "محمد", "الفتح",
      "الحجرات", "ق", "الذاريات", "الطور", "النجم", "القمر", "الرحمن", "الواقعة",
      "الحديد", "المجادلة", "الحشر", "الممتحنة", "الصف", "الجمعة", "المنافقون",
      "التغابن", "الطلاق", "التحريم", "الملك", "القلم", "الحاقة", "المعارج",
      "نوح", "الجن", "المزمل", "المدثر", "القيامة", "الانسان", "المرسلات",
      "النبأ", "النازعات", "عبس", "التكوير", "الإنفطار", "المطففين", "الإنشقاق",
      "البروج", "الطارق", "الأعلى", "الغاشية", "الفجر", "البلد", "الشمس",
      "الليل", "الضحى", "الشرح", "التين", "العلق", "القدر", "البينة", "الزلزلة",
      "العاديات", "القارعة", "التكاثر", "العصر", "الهمزة", "الفيل", "قريش",
      "الماعون", "الكوثر", "الكافرون", "النصر", "المسد", "الإخلاص", "الفلق", "الناس"
    ];

    let students = JSON.parse(localStorage.getItem('quranStudents') || '[]');

    function save() {
      localStorage.setItem('quranStudents', JSON.stringify(students));
    }

    function renderStudents() {
      const container = document.getElementById('studentsContainer');
      container.innerHTML = '';
      students.forEach((student, i) => {
        const box = document.createElement('div');
        box.className = 'student-box';
        box.innerHTML = `<strong>${student.name}</strong>
          <button class="delete-btn" onclick="deleteStudent(${i})">Delete</button>
          <div id="assignments-${i}"></div>
          <button class="add-btn" onclick="addAssignment(${i})">➕ Add Surah</button>`;
        container.appendChild(box);
        if (!student.assignments) student.assignments = [];
        student.assignments.forEach((a, j) => renderAssignment(i, a, j));
      });
      save();
    }

    function renderAssignment(studentIndex, a, j) {
      const div = document.createElement('div');
      div.innerHTML = `
        <label>Surah</label>
        <select>
          ${surahs.map(s => `<option value="${s}" ${a.surah === s ? 'selected' : ''}>${s}</option>`).join('')}
        </select>
        <div class="inline">
          <input type="checkbox" ${a.entire ? 'checked' : ''} onchange="this.parentElement.nextElementSibling.disabled = this.checked; this.parentElement.nextElementSibling.nextElementSibling.disabled = this.checked;"> 
          <label>Entire Surah</label>
        </div>
        <input type="number" placeholder="From Ayah" value="${a.from || ''}" ${a.entire ? 'disabled' : ''}>
        <input type="number" placeholder="To Ayah" value="${a.to || ''}" ${a.entire ? 'disabled' : ''}>
        <hr>
      `;
      document.getElementById(`assignments-${studentIndex}`).appendChild(div);
    }

    function addStudentToList() {
      const input = document.getElementById('newStudent');
      const name = input.value.trim();
      if (name) {
        students.push({ name, assignments: [] });
        input.value = '';
        renderStudents();
      }
    }

    function deleteStudent(index) {
      students.splice(index, 1);
      renderStudents();
    }

    function addAssignment(i) {
      students[i].assignments.push({ surah: surahs[0], from: '', to: '', entire: false });
      renderStudents();
    }

    function generateMessage() {
      let msg = '📚 Quran Homework Assignment\n\n';
      let msgAr = '📚 واجب تحفيظ القرآن\n\n';
      students.forEach(student => {
        msg += `👦 Student: ${student.name}\n`;
        msgAr += `👦 الطالب: ${student.name}\n`;
        student.assignments.forEach(a => {
          msg += `📖 Surah: ${a.surah}\n`;
          msgAr += `📖 السورة: ${a.surah}\n`;
          if (a.entire) {
            msg += `🔢 Entire Surah\n\n`;
            msgAr += `🔢 السورة كاملة\n\n`;
          } else {
            msg += `🔢 Ayahs: ${a.from} to ${a.to}\n\n`;
            msgAr += `🔢 الآيات: ${a.from} إلى ${a.to}\n\n`;
          }
        });
      });
      msg += "📌 Please help your child review and memorize this section.\nJazakum Allahu Khairan!\n\n";
      msgAr += "📌 الرجاء متابعة طفلك في المراجعة والحفظ.\nجزاكم الله خيرًا!";
      document.getElementById('output').textContent = msg + '\n' + msgAr;
    }

    renderStudents();
  </script>
</body>
</html>
